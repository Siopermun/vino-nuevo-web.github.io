import{r as u,u as y,j as r,g as w,ak as A,aj as B,a as d,C as h,S as $,R as C,c as D}from"./index-33c4326b.js";import{u as E}from"./usePageTitle-560252fa.js";import{r as G}from"./index-14c205f3.js";import{A as g}from"./Alert-bdb5bcdb.js";import{C as f}from"./Card-ce2b2b94.js";const N=u.forwardRef(({bsPrefix:o,active:a=!1,children:s,className:m,as:n="li",linkAs:i=A,linkProps:c={},href:b,title:e,target:t,...l},v)=>{const I=y(o,"breadcrumb-item");return r(n,{ref:v,...l,className:w(I,m,{active:a}),"aria-current":a?"page":void 0,children:a?s:r(i,{...c,href:b,title:e,target:t,children:s})})});N.displayName="BreadcrumbItem";const j=N,x=u.forwardRef(({bsPrefix:o,className:a,listProps:s={},children:m,label:n="breadcrumb",as:i="nav",...c},b)=>{const e=y(o,"breadcrumb");return r(i,{"aria-label":n,className:a,ref:b,...c,children:r("ol",{...s,className:w(e,s==null?void 0:s.className),children:m})})});x.displayName="Breadcrumb";const p=Object.assign(x,{Item:j}),T=()=>{const{id:o}=B();console.log("GalleryAlbumDetails: ID del álbum de la URL:",o);const[a,s]=u.useState(null),[m,n]=u.useState(!0),[i,c]=u.useState(null);if(E(a?`${a.title} - Galerías - Vino Nuevo`:"Cargando Álbum - Vino Nuevo"),u.useEffect(()=>{n(!0),c(null),fetch("http://localhost:3001/api/content/galleryImages").then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{console.log("GalleryAlbumDetails: Datos recibidos del backend:",e);const t=e.data.find(l=>l.id===parseInt(o));console.log("GalleryAlbumDetails: Álbum encontrado:",t),t?s(t):c("Álbum no encontrado"),n(!1)}).catch(e=>{console.error("Error fetching album details:",e),c(e.message),n(!1)})},[o]),m)return d(h,{className:"my-5 text-center",children:[r($,{animation:"border",variant:"primary"}),r("p",{className:"mt-2",children:"Cargando álbum..."})]});if(i)return r(h,{className:"my-5 text-center",children:d(g,{variant:"danger",children:["Error: ",i]})});if(!a)return r(h,{className:"my-5 text-center",children:r(g,{variant:"info",children:"El álbum solicitado no existe."})});console.log("GalleryAlbumDetails: Álbum a renderizar:",a),console.log("GalleryAlbumDetails: Imágenes del álbum a renderizar:",a.images);const b=e=>{if(e.includes("youtube.com/watch?v=")){const t=e.split("v=")[1],l=t.indexOf("&");return l!==-1?`https://www.youtube.com/embed/${t.substring(0,l)}`:`https://www.youtube.com/embed/${t}`}else if(e.includes("youtu.be/")){const t=e.split("youtu.be/")[1],l=t.indexOf("?");return l!==-1?`https://www.youtube.com/embed/${t.substring(0,l)}`:`https://www.youtube.com/embed/${t}`}else if(e.includes("vimeo.com/"))return`https://player.vimeo.com/video/${e.split("vimeo.com/")[1]}`;return null};return d(h,{className:"my-5",children:[d(p,{children:[r(G.LinkContainer,{to:"/galerias",children:r(p.Item,{children:"Galerías"})}),r(p.Item,{active:!0,children:a.title})]}),r("h1",{className:"text-center mb-4",children:a.title}),a.description&&r("p",{className:"lead text-center mb-5",children:a.description}),r(C,{xs:1,md:2,lg:3,className:"g-4",children:a.images.map((e,t)=>d(D,{children:[" ",d(f,{className:"h-100 shadow card-book",children:[e.src&&r(f.Img,{variant:"top",src:e.src,alt:e.alt,loading:"lazy"}),e.videoUrl&&r("div",{className:"ratio ratio-16x9",children:r("iframe",{src:b(e.videoUrl),title:e.alt||"Video",allowFullScreen:!0})}),(e.alt||e.videoUrl)&&r(f.Body,{children:r(f.Text,{className:"text-center",children:e.alt||(e.videoUrl?"Video":"")})})]})]},e.src||e.videoUrl||t))})]})};export{T as default};
